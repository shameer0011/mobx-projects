{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/DELL/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/DELL/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/Users/DELL/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/DELL/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { action, makeAutoObservable, makeObservable, observable } from \"mobx\";\nimport { authService } from \"../../servieces/auth/authenticationServiece\";\nexport var AuthStore = /*#__PURE__*/function () {\n  // constructor() {\n  //   makeObservable(this, {\n  //     authenticated: observable,\n  //     getAccessToken: action,\n  //     isAuthenticated: action,\n  //   });\n  // }\n  function AuthStore() {\n    _classCallCheck(this, AuthStore);\n\n    this.authenticated = false;\n    makeAutoObservable(this);\n    this.authenticated = !!this.getAccessToken();\n  }\n\n  _createClass(AuthStore, [{\n    key: \"Authenticated\",\n    set: function set(authenticatedd) {\n      this.authenticated = authenticatedd;\n    }\n  }, {\n    key: \"mobxLogin\",\n    value: function () {\n      var _mobxLogin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name, pass) {\n        var r;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(name, pass);\n                _context.next = 3;\n                return authService.loginApi(name, pass);\n\n              case 3:\n                r = _context.sent;\n                console.log(r);\n                localStorage.setItem(\"access_token\", r.access_token);\n                this.Authenticated(true); // this.authenticated = true;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function mobxLogin(_x, _x2) {\n        return _mobxLogin.apply(this, arguments);\n      }\n\n      return mobxLogin;\n    }()\n  }, {\n    key: \"getAccessToken\",\n    value: function getAccessToken() {\n      return localStorage.getItem(\"access_token\");\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      return this.authenticated;\n    } //im doing compoent called mobx store and mobx store called api serviece\n    // async mobxLogin(username, password) {\n    //   console.log(username, password);\n    //   // try {\n    //   const tokenPayloadDto = await this.AuthService.loginApi(username, password);\n    //   console.log(tokenPayloadDto, \"21\");\n    //   localStorage.setItem(\"access_token\", tokenPayloadDto);\n    //   // this.setAuthenticated(true);\n    //   // } catch (err) {\n    //   // this.setAuthenticated(false);\n    //   // }\n    // }\n\n  }]);\n\n  return AuthStore;\n}();","map":{"version":3,"names":["action","makeAutoObservable","makeObservable","observable","authService","AuthStore","authenticated","getAccessToken","authenticatedd","name","pass","console","log","loginApi","r","localStorage","setItem","access_token","Authenticated","getItem"],"sources":["C:/Users/DELL/Downloads/mobx-context-projcts-ecom-forked/src/mobx/auth-mobx/Mobx.auth.Store.js"],"sourcesContent":["import { action, makeAutoObservable, makeObservable, observable } from \"mobx\";\r\nimport { authService } from \"../../servieces/auth/authenticationServiece\";\r\n\r\nexport class AuthStore {\r\n  authenticated = false;\r\n\r\n  // constructor() {\r\n  //   makeObservable(this, {\r\n  //     authenticated: observable,\r\n\r\n  //     getAccessToken: action,\r\n  //     isAuthenticated: action,\r\n  //   });\r\n  // }\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n    this.authenticated = !!this.getAccessToken();\r\n  }\r\n\r\n  set Authenticated (authenticatedd)  {\r\n    this.authenticated = authenticatedd;\r\n  }\r\n\r\n  async mobxLogin (name, pass){\r\n console.log(name, pass);\r\n const r = await authService.loginApi(name, pass);\r\n console.log(r)\r\n localStorage.setItem(\"access_token\", r.access_token);\r\n this.Authenticated(true)\r\n// this.authenticated = true;\r\n \r\n  }\r\n  getAccessToken() {\r\n    return localStorage.getItem(\"access_token\");\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n\r\n  //im doing compoent called mobx store and mobx store called api serviece\r\n  // async mobxLogin(username, password) {\r\n  //   console.log(username, password);\r\n  //   // try {\r\n  //   const tokenPayloadDto = await this.AuthService.loginApi(username, password);\r\n  //   console.log(tokenPayloadDto, \"21\");\r\n  //   localStorage.setItem(\"access_token\", tokenPayloadDto);\r\n  //   // this.setAuthenticated(true);\r\n  //   // } catch (err) {\r\n  //   // this.setAuthenticated(false);\r\n  //   // }\r\n  // }\r\n}\r\n"],"mappings":";;;;AAAA,SAASA,MAAT,EAAiBC,kBAAjB,EAAqCC,cAArC,EAAqDC,UAArD,QAAuE,MAAvE;AACA,SAASC,WAAT,QAA4B,6CAA5B;AAEA,WAAaC,SAAb;EAGE;EACA;EACA;EAEA;EACA;EACA;EACA;EACA,qBAAc;IAAA;;IAAA,KAVdC,aAUc,GAVE,KAUF;IACZL,kBAAkB,CAAC,IAAD,CAAlB;IACA,KAAKK,aAAL,GAAqB,CAAC,CAAC,KAAKC,cAAL,EAAvB;EACD;;EAdH;IAAA;IAAA,KAgBE,aAAmBC,cAAnB,EAAoC;MAClC,KAAKF,aAAL,GAAqBE,cAArB;IACD;EAlBH;IAAA;IAAA;MAAA,4EAoBE,iBAAiBC,IAAjB,EAAuBC,IAAvB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACDC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkBC,IAAlB;gBADC;gBAAA,OAEeN,WAAW,CAACS,QAAZ,CAAqBJ,IAArB,EAA2BC,IAA3B,CAFf;;cAAA;gBAEKI,CAFL;gBAGDH,OAAO,CAACC,GAAR,CAAYE,CAAZ;gBACAC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,CAAC,CAACG,YAAvC;gBACA,KAAKC,aAAL,CAAmB,IAAnB,EALC,CAMF;;cANE;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CApBF;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA,OA6BE,0BAAiB;MACf,OAAOH,YAAY,CAACI,OAAb,CAAqB,cAArB,CAAP;IACD;EA/BH;IAAA;IAAA,OAiCE,2BAAkB;MAChB,OAAO,KAAKb,aAAZ;IACD,CAnCH,CAqCE;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EAhDF;;EAAA;AAAA"},"metadata":{},"sourceType":"module"}