{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar _require = require(\"mobx\"),\n    makeAutoObservable = _require.makeAutoObservable;\n\nimport { fetchPrice } from '../utils';\n\nvar CoinStore = /*#__PURE__*/function () {\n  function CoinStore(name, tracker) {\n    var _this = this;\n\n    _classCallCheck(this, CoinStore);\n\n    this.price = 0;\n    this.isFavorite = false;\n    this.history = [];\n    this.startInterval = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setInterval( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                var c;\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return fetchPrice(_this.ticker);\n\n                      case 2:\n                        c = _context.sent;\n\n                        _this.history.unshift({\n                          price: _this.price,\n                          dateUpdated: _this.dateUpdated\n                        });\n\n                        _this.setPrice(c);\n\n                      case 5:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), 2000);\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    this.setPrice = function (price) {\n      _this.price = price;\n      _this.dateUpdated = new Date();\n    };\n\n    this.changeFavoriteStatus = function () {\n      _this.isFavorite = !_this.isFavorite;\n    };\n\n    makeAutoObservable(this);\n    this.ticker = tracker;\n    this.name = name;\n    this.startInterval();\n  }\n\n  _createClass(CoinStore, [{\n    key: \"lastMove\",\n    get: function get() {\n      if (!this.history.length) return 'none';\n      var lastPrice = this.history[0].price;\n      if (!lastPrice || lastPrice === this.price) return 'none';\n      if (lastPrice < this.price) return 'up';\n      return 'down';\n    }\n  }]);\n\n  return CoinStore;\n}();\n\nexport default CoinStore;","map":{"version":3,"names":["require","makeAutoObservable","fetchPrice","CoinStore","name","tracker","price","isFavorite","history","startInterval","setInterval","ticker","c","unshift","dateUpdated","setPrice","Date","changeFavoriteStatus","length","lastPrice"],"sources":["C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/src/mobx_course/store/coins.js"],"sourcesContent":["const { makeAutoObservable } = require(\"mobx\");\r\nimport {fetchPrice} from '../utils'\r\nclass CoinStore {\r\n    ticker\r\n    price=0\r\n    dateUpdated\r\n    name\r\n    isFavorite = false\r\n    history = []\r\n\r\n    constructor(name,tracker) {\r\n       makeAutoObservable(this)\r\n       this.ticker = tracker\r\n       this.name=name\r\n       this.startInterval()\r\n    }\r\n\r\n   startInterval=async()=>{\r\n      setInterval(async()=>{\r\n            const c= await fetchPrice(this.ticker)\r\n            this.history.unshift({ price: this.price, dateUpdated: this.dateUpdated })\r\n            this.setPrice(c)\r\n         } , 2000)\r\n   }\r\n\r\n   setPrice =(price)=>{\r\n    this.price=price\r\n    this.dateUpdated=new Date()\r\n   }\r\n\r\n   get lastMove() {\r\n      if (!this.history.length) return 'none'\r\n      const lastPrice = this.history[0].price\r\n      if (!lastPrice || lastPrice === this.price) return 'none'\r\n      if (lastPrice < this.price) return 'up'\r\n      return 'down'\r\n    }\r\n\r\n   changeFavoriteStatus = () => {\r\n      this.isFavorite = !this.isFavorite\r\n   }\r\n\r\n}\r\nexport default CoinStore;"],"mappings":";;;;;AAAA,eAA+BA,OAAO,CAAC,MAAD,CAAtC;AAAA,IAAQC,kBAAR,YAAQA,kBAAR;;AACA,SAAQC,UAAR,QAAyB,UAAzB;;IACMC,S;EAQF,mBAAYC,IAAZ,EAAiBC,OAAjB,EAA0B;IAAA;;IAAA;;IAAA,KAN1BC,KAM0B,GANpB,CAMoB;IAAA,KAH1BC,UAG0B,GAHb,KAGa;IAAA,KAF1BC,OAE0B,GAFhB,EAEgB;IAAA,KAO3BC,aAP2B,2EAOb;MAAA;QAAA;UAAA;YAAA;cACXC,WAAW,0EAAC;gBAAA;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;wBAAA,OACSR,UAAU,CAAC,KAAI,CAACS,MAAN,CADnB;;sBAAA;wBACAC,CADA;;wBAEN,KAAI,CAACJ,OAAL,CAAaK,OAAb,CAAqB;0BAAEP,KAAK,EAAE,KAAI,CAACA,KAAd;0BAAqBQ,WAAW,EAAE,KAAI,CAACA;wBAAvC,CAArB;;wBACA,KAAI,CAACC,QAAL,CAAcH,CAAd;;sBAHM;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA;cAAA,CAAD,IAIJ,IAJI,CAAX;;YADW;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAPa;;IAAA,KAe3BG,QAf2B,GAejB,UAACT,KAAD,EAAS;MAClB,KAAI,CAACA,KAAL,GAAWA,KAAX;MACA,KAAI,CAACQ,WAAL,GAAiB,IAAIE,IAAJ,EAAjB;IACA,CAlB0B;;IAAA,KA4B3BC,oBA5B2B,GA4BJ,YAAM;MAC1B,KAAI,CAACV,UAAL,GAAkB,CAAC,KAAI,CAACA,UAAxB;IACF,CA9B0B;;IACvBN,kBAAkB,CAAC,IAAD,CAAlB;IACA,KAAKU,MAAL,GAAcN,OAAd;IACA,KAAKD,IAAL,GAAUA,IAAV;IACA,KAAKK,aAAL;EACF;;;;SAeF,eAAe;MACZ,IAAI,CAAC,KAAKD,OAAL,CAAaU,MAAlB,EAA0B,OAAO,MAAP;MAC1B,IAAMC,SAAS,GAAG,KAAKX,OAAL,CAAa,CAAb,EAAgBF,KAAlC;MACA,IAAI,CAACa,SAAD,IAAcA,SAAS,KAAK,KAAKb,KAArC,EAA4C,OAAO,MAAP;MAC5C,IAAIa,SAAS,GAAG,KAAKb,KAArB,EAA4B,OAAO,IAAP;MAC5B,OAAO,MAAP;IACD;;;;;;AAOL,eAAeH,SAAf"},"metadata":{},"sourceType":"module"}