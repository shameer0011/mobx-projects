{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { action, makeAutoObservable, makeObservable, observable } from \"mobx\"; // import { authService } from \"../../servieces/auth/authenticationServiece\"\n\nvar AuthStore = /*#__PURE__*/function () {\n  function AuthStore(api) {\n    var _this = this;\n\n    _classCallCheck(this, AuthStore);\n\n    this.authenticated = this.getAccessToken() !== null;\n\n    this.mobxLogin = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name, pass) {\n        var r;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.api.loginApi(name, pass);\n\n              case 2:\n                r = _context.sent;\n                localStorage.setItem(\"access_token\", r.access_token);\n\n                _this.setAuthenticated(true);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.setAuthenticated = function (auth) {\n      _this.authenticated = auth;\n    };\n\n    makeAutoObservable(this); //  this.startInterval()\n\n    this.api = api;\n  }\n\n  _createClass(AuthStore, [{\n    key: \"getAccessToken\",\n    value: function getAccessToken() {\n      return localStorage.getItem(\"access_token\");\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      return this.authenticated;\n    }\n  }]);\n\n  return AuthStore;\n}();\n\nexport default AuthStore;","map":{"version":3,"names":["action","makeAutoObservable","makeObservable","observable","AuthStore","api","authenticated","getAccessToken","mobxLogin","name","pass","loginApi","r","localStorage","setItem","access_token","setAuthenticated","auth","getItem"],"sources":["C:/Users/Acer/Downloads/mobx-context-projcts-ecom-forked/src/mobx/auth-mobx/Mobx.auth.Store.js"],"sourcesContent":["import { action, makeAutoObservable, makeObservable, observable } from \"mobx\";\r\n// import { authService } from \"../../servieces/auth/authenticationServiece\"\r\n\r\nclass AuthStore {\r\n\r\n    authenticated =  this.getAccessToken() !== null;\r\n   api\r\n    constructor(api) {\r\n       makeAutoObservable(this)\r\n      //  this.startInterval()\r\n      this.api=api\r\n    }\r\n\r\n\r\n    mobxLogin =async(name, pass)=> {\r\n    const r = await this.api.loginApi(name, pass);\r\n    localStorage.setItem(\"access_token\", r.access_token);\r\n    this.setAuthenticated(true);\r\n  }\r\n\r\n  setAuthenticated =(auth)=>{\r\n    this.authenticated=auth\r\n   }\r\n\r\n \r\n\r\n   getAccessToken() {\r\n    return localStorage.getItem(\"access_token\");\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n  \r\n\r\n}\r\nexport default  AuthStore;"],"mappings":";;;;AAAA,SAASA,MAAT,EAAiBC,kBAAjB,EAAqCC,cAArC,EAAqDC,UAArD,QAAuE,MAAvE,C,CACA;;IAEMC,S;EAIF,mBAAYC,GAAZ,EAAiB;IAAA;;IAAA;;IAAA,KAFjBC,aAEiB,GAFA,KAAKC,cAAL,OAA0B,IAE1B;;IAAA,KAOjBC,SAPiB;MAAA,sEAON,iBAAMC,IAAN,EAAYC,IAAZ;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACK,KAAI,CAACL,GAAL,CAASM,QAAT,CAAkBF,IAAlB,EAAwBC,IAAxB,CADL;;cAAA;gBACLE,CADK;gBAEXC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,CAAC,CAACG,YAAvC;;gBACA,KAAI,CAACC,gBAAL,CAAsB,IAAtB;;cAHW;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAPM;;MAAA;QAAA;MAAA;IAAA;;IAAA,KAanBA,gBAbmB,GAaD,UAACC,IAAD,EAAQ;MACxB,KAAI,CAACX,aAAL,GAAmBW,IAAnB;IACA,CAfiB;;IACdhB,kBAAkB,CAAC,IAAD,CAAlB,CADc,CAEf;;IACA,KAAKI,GAAL,GAASA,GAAT;EACD;;;;WAeF,0BAAiB;MAChB,OAAOQ,YAAY,CAACK,OAAb,CAAqB,cAArB,CAAP;IACD;;;WAED,2BAAkB;MAChB,OAAO,KAAKZ,aAAZ;IACD;;;;;;AAIH,eAAgBF,SAAhB"},"metadata":{},"sourceType":"module"}